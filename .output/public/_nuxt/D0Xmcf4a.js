import{x as U,y as A,r as o,n as q,c as m,a as l,p as s,u as d,F as C,q as K,z as D,s as E,o as p,H as F,t as k}from"./B8_WjUqw.js";import{u as w}from"./BMbFKR4x.js";const M={class:"p-8 mx-auto max-w-2xl bg-white rounded-lg shadow-lg"},P={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Y={key:0,class:"mt-4"},B=["value","onChange"],H={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},z={__name:"ekle",setup(O){const S=U(),V=A(),i=o(""),v=o(""),b=o(""),y=o(""),r=o(""),f=o(""),g=o(""),u=o(""),n=o([]);q(()=>{i.value=S.query.firmaId||""});const I=async()=>{await w("/api/yerleske/post",{method:"POST",body:{firmaId:i.value,subeAdi:v.value,adres:b.value,naceKodID:r.value,telefon:f.value,yetkili:g.value,sgkSicilNo:u.value}},"$Ix7vwZyS2n"),alert("Yerleşke başarıyla eklendi!"),V.push("/firma")},N=a=>new Promise(e=>setTimeout(e,a)),c=async()=>{if(u.value.length>=4){await N(2e3);try{const{data:a}=await w("/api/firma/nace-search",{method:"POST",body:{sgkSicilNo:u.value}},"$HgzcrHOfSn");n.value=a.value||[]}catch(a){console.error("NACE Kodları API hatası:",a),n.value=[]}}else n.value=[]},T=a=>{y.value=a.tehlikeSinifi};return(a,e)=>(p(),m("div",M,[e[19]||(e[19]=l("h1",{class:"text-3xl font-bold text-center text-gray-800 mb-6"},"Yeni Taşeron Ekle",-1)),l("form",{onSubmit:E(I,["prevent"]),class:"space-y-4"},[l("div",null,[e[9]||(e[9]=l("label",{class:"block text-sm font-medium text-gray-600"},"Firma ID",-1)),s(l("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.value=t),type:"text",class:"border border-gray-300 p-2 w-full rounded-md",readonly:""},null,512),[[d,i.value]])]),l("div",null,[e[10]||(e[10]=l("label",{class:"block text-sm font-medium text-gray-600"},"Taşeron Adı",-1)),s(l("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>v.value=t),type:"text",class:"border border-gray-300 p-2 w-full rounded-md",required:""},null,512),[[d,v.value]])]),l("div",null,[e[11]||(e[11]=l("label",{class:"block text-sm font-medium text-gray-600"},"Adres",-1)),s(l("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>b.value=t),type:"text",class:"border border-gray-300 p-2 w-full rounded-md",required:""},null,512),[[d,b.value]])]),l("div",P,[l("div",null,[e[12]||(e[12]=l("label",{class:"block text-sm font-medium text-gray-600"},"SGK Sicil No",-1)),s(l("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>u.value=t),onInput:c,type:"text",class:"border border-gray-300 p-2 w-full rounded-md",required:""},null,544),[[d,u.value]])]),l("div",null,[e[13]||(e[13]=l("label",{class:"block text-sm font-medium text-gray-600"},"NACE Kodu ID",-1)),s(l("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>r.value=t),type:"text",class:"border border-gray-300 p-2 w-40 rounded-md",required:""},null,512),[[d,r.value]])]),l("div",null,[e[14]||(e[14]=l("label",{class:"block text-sm font-medium text-gray-600"},"Tehlike Sınıfı",-1)),s(l("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>y.value=t),class:"border border-gray-300 p-2 w-40 rounded-md"},null,512),[[d,y.value]])])]),n.value.length>0?(p(),m("div",Y,[e[15]||(e[15]=l("label",{class:"block text-gray-600 mb-1"},"NACE Kodları",-1)),(p(!0),m(C,null,K(n.value,t=>(p(),m("div",{key:t.id,class:"flex items-center"},[s(l("input",{type:"radio",value:t.id,"onUpdate:modelValue":e[6]||(e[6]=x=>r.value=x),onChange:x=>T(t),class:"mr-2"},null,40,B),[[F,r.value]]),l("span",null,k(t.kod)+" - ("+k(t.tehlikeSinifi)+")",1)]))),128))])):D("",!0),l("div",H,[l("div",null,[e[16]||(e[16]=l("label",{class:"block text-sm font-medium text-gray-600"},"Telefon",-1)),s(l("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>f.value=t),type:"tel",class:"border border-gray-300 p-2 w-full rounded-md"},null,512),[[d,f.value]])]),l("div",null,[e[17]||(e[17]=l("label",{class:"block text-sm font-medium text-gray-600"},"Yetkili",-1)),s(l("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>g.value=t),type:"text",class:"border border-gray-300 p-2 w-full rounded-md",required:""},null,512),[[d,g.value]])])]),e[18]||(e[18]=l("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md w-full font-semibold"}," Kaydet ",-1))],32)]))}};export{z as default};
