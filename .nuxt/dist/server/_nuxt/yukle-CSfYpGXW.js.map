{"version":3,"file":"yukle-CSfYpGXW.js","sources":["../../../../pages/calisanlar/dokuman/yukle.vue"],"sourcesContent":["<template>\n  <div class=\"p-6 max-w-full mx-auto bg-white rounded-lg shadow-lg\">\n    <h1 class=\"text-2xl font-semibold mb-6\">Sağlık Raporu / Sertifika Yükle</h1>\n\n    <!-- Çalışan Bilgisi -->\n    <div class=\"mb-4\">\n      <label class=\"block text-sm font-medium text-gray-600\">Seçilen Çalışan</label>\n      <div class=\"border p-2 w-80 rounded-md\">\n        {{ calisanAdi }} {{ calisanSoyadi }} (ID: {{ calisanId }})\n      </div>\n    </div>\n\n\n\n    <!-- Dosya Türü Seçimi -->\n    <div class=\"mb-4\">\n      <label class=\"block text-sm font-medium text-gray-600\">Belge Türü</label>\n      <select v-model=\"selectedBelgeTur\" class=\"border p-2 w-80 rounded-md\" required>\n        <option value=\"\" disabled>Belge Türü Seçiniz</option>\n        <option value=\"saglikRaporu\">Sağlık Raporu</option>\n        <option value=\"sertifika\">Sertifika</option>\n      </select>\n    </div>\n\n    <!-- Geçerlilik Tarihi -->\n    <div class=\"mb-4\">\n      <label class=\"block text-sm font-medium text-gray-600\">Geçerlilik Tarihi</label>\n      <input v-model=\"gecerlilikTarihi\" type=\"date\" class=\"border p-2 w-40 rounded-md\" required />\n    </div>\n\n  \n\n    \n \n\n    <form @submit.prevent=\"uploadDocument\" enctype=\"multipart/form-data\">\n  <input type=\"file\" name=\"file\" @change=\"handleFileUpload\" accept=\".pdf\" class=\"mb-4\" />\n  <button type=\"submit\" class=\"bg-blue-600 text-white py-2 px-4 rounded-md\">Yükle</button>\n</form>\n\n\n  </div>\n <!-- Yükle Butonu -->\n <!-- <button @click=\"fetchCalisanlar\" class=\"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md\">\n      Yenile\n    </button> -->\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { useFetch } from '#app'\nimport { useRoute } from 'vue-router'\nimport { useRouter } from 'vue-router'\n\nconst route = useRoute()\nconst router = useRouter()\n\n// Query parametrelerinden çalışan bilgilerini al\nconst calisanId = ref(route.query.calisanId)\nconst calisanAdi = ref(route.query.calisanAdi)\nconst calisanSoyadi = ref(route.query.calisanSoyadi)\n\n\n\nconst selectedBelgeTur = ref(null)\nconst gecerlilikTarihi = ref(null)\nconst file = ref(null)\n\nonMounted(() => {\n\n})\n\n\n// Dosya Yükleme İşlemi\nconst handleFileUpload = (event) => {\n  file.value = event.target.files[0]\n}\n\n// Belge Yükleme Fonksiyonu\nconst uploadDocument = async () => {\n  if (!file.value || !selectedBelgeTur.value || !gecerlilikTarihi.value) {\n    alert('Lütfen tüm alanları doldurun.')\n    return\n  }\n\n  const formData = new FormData()\n  formData.append('calisanId', calisanId.value)\n  formData.append('belgeTur', selectedBelgeTur.value)\n  formData.append('gecerlilikTarihi', gecerlilikTarihi.value)\n  formData.append('file', file.value)\n\n  await useFetch('/api/dokuman/yukle', {\n    method: 'POST',\n    body: formData\n  })\n\n  alert('Belge başarıyla yüklendi.')\n  router.push('/calisanlar')\n}\n\n\n</script>\n"],"names":[],"mappings":";;;;;;;;;;;;AAsDA,UAAM,QAAQ,SAAS;AACR,cAAU;AAGzB,UAAM,YAAY,IAAI,MAAM,MAAM,SAAS;AAC3C,UAAM,aAAa,IAAI,MAAM,MAAM,UAAU;AAC7C,UAAM,gBAAgB,IAAI,MAAM,MAAM,aAAa;AAInD,UAAM,mBAAmB,IAAI,IAAI;AACjC,UAAM,mBAAmB,IAAI,IAAI;AACpB,QAAI,IAAI;;;;;;;;;;;;"}