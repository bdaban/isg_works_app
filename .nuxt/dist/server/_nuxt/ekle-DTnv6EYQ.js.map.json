{"file":"ekle-DTnv6EYQ.js","mappings":";;;;;;;;;;;;;;;;;;;;;AAuDA,UAAM,QAAQ,SAAS;AACR,cAAU;AACzB,UAAM,WAAW,IAAI,EAAE;AACvB,UAAM,cAAc,IAAI,EAAE;AAG1B,UAAM,oBAAoB,IAAI;AAAA,MAC5B,KAAK;AAAA,MACL,QAAQ;AAAA,MACR,OAAO;AAAA,MACP,SAAS;AAAA,MACT,gBAAgB;AAAA,MAChB,SAAS,MAAM,MAAM,WAAW;AAAA;AAAA,MAChC,iBAAiB,MAAM,MAAM,cAAc;AAAA;AAAA,MAC3C,OAAO;AAAA,IACT,CAAC;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["../../../../pages/calisanlar/ekle.vue"],"sourcesContent":["<template>\n  <div class=\"p-6 max-w-lg mx-auto bg-white rounded-lg shadow-lg\">\n    <h1 class=\"text-2xl font-semibold mb-6\">Çalışan Ekle</h1>\n    \n    <form @submit.prevent=\"saveCalisan\">\n      <div class=\"mb-4\">\n        <label class=\"block text-sm font-medium text-gray-600\">Adı</label>\n        <input v-model=\"calisanFormFields.adi\" type=\"text\" class=\"border p-2 w-full rounded-md\" required />\n      </div>\n      <div class=\"mb-4\">\n        <label class=\"block text-sm font-medium text-gray-600\">Soyadı</label>\n        <input v-model=\"calisanFormFields.soyadi\" type=\"text\" class=\"border p-2 w-full rounded-md\" required />\n      </div>\n      <div class=\"mb-4\">\n        <label class=\"block text-sm font-medium text-gray-600\">TC No</label>\n        <input v-model=\"calisanFormFields.tc_no\" type=\"text\" class=\"border p-2 w-full rounded-md\" required />\n      </div>\n      <div class=\"mb-4\">\n        <label class=\"block text-sm font-medium text-gray-600\">Mesleği</label>\n        <input v-model=\"calisanFormFields.meslegi\" type=\"text\" class=\"border p-2 w-full rounded-md\" required />\n      </div>\n      <div class=\"mb-4\">\n        <label class=\"block text-sm font-medium text-gray-600\">İşe Giriş Tarihi</label>\n        <input v-model=\"calisanFormFields.isegiristarihi\" type=\"date\" class=\"border p-2 w-full rounded-md\" required />\n      </div>\n      <div class=\"mb-4\">\n        <label class=\"block text-sm font-medium text-gray-600\">Firma</label>\n        <select v-model=\"calisanFormFields.firmaId\" class=\"border p-2 w-full rounded-md\" required>\n          <option v-for=\"firma in firmalar\" :key=\"firma.id\" :value=\"firma.id\">{{ firma.firmaAdi }}</option>\n        </select>\n      </div>\n      <div class=\"mb-4\">\n        <label class=\"block text-sm font-medium text-gray-600\">Yerleşke</label>\n        <select v-model=\"calisanFormFields.firmaYerleskeId\" class=\"border p-2 w-full rounded-md\" >\n          <option v-for=\"yerleske in yerleskeler\" :key=\"yerleske.id\" :value=\"yerleske.id\">{{ yerleske.subeAdi }}</option>\n        </select>\n      </div>\n      <div class=\"mb-4\">\n        <label class=\"block text-sm font-medium text-gray-600\">Aktif</label>\n        <select v-model=\"calisanFormFields.aktif\" class=\"border p-2 w-full rounded-md\">\n          <option :value=\"true\">Evet</option>\n          <option :value=\"false\">Hayır</option>\n        </select>\n      </div>\n      <button type=\"submit\" class=\"bg-blue-600 text-white py-2 px-4 rounded-md w-full\">Kaydet</button>\n    </form>\n  </div>\n\n\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { useFetch, useRouter, useRoute } from '#app'\n\nconst route = useRoute()\nconst router = useRouter()\nconst firmalar = ref([])\nconst yerleskeler = ref([])\n\n// Form verileri\nconst calisanFormFields = ref({\n  adi: '',\n  soyadi: '',\n  tc_no: '',\n  meslegi: '',\n  isegiristarihi: '',\n  firmaId: route.query.firmaId || '', // Firma ID, URL'den geliyor\n  firmaYerleskeId: route.query.yerleskeId || '', // Yerleşke ID, URL'den geliyor\n  aktif: true,\n})\n\n\n\n\n// Firma ve yerleşke verilerini yükle\nconst fetchFirmalarYerleskeler = async () => {\n\n  try {\n    // Yerleşke verilerini çek\n    const yerleskeData = await $fetch('/api/yerleske/get')\n    yerleskeler.value = yerleskeData\n\n    // Firma verilerini çek\n    const firmaData = await $fetch('/api/firma/get')\n    firmalar.value = firmaData\n\n  } catch (error) {\n    console.error(\"Veri çekme hatası:\", error)\n  }\n\n \n  \n  \n}\n\n// Çalışanı kaydet\nconst saveCalisan = async () => {\n  await useFetch('/api/calisan/post', {\n    method: 'POST',\n    body: calisanFormFields.value,\n  })\n  router.push('/calisanlar')\n}\n\nonMounted(()=>{\n  fetchFirmalarYerleskeler();\n}\n)\n</script>\n"],"version":3}