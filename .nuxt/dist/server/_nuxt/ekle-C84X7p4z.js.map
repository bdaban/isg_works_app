{"version":3,"file":"ekle-C84X7p4z.js","sources":["../../../../pages/egitimler/ekle.vue"],"sourcesContent":["<template>\n  <div class=\"p-6 max-w-full mx-auto bg-white rounded-lg shadow-lg\">\n    <h1 class=\"text-2xl font-semibold mb-6\">Eğitim Konuları ve Kategoriler</h1>\n\n    <!-- Yeni Kategori Ekleme -->\n    <div class=\"mb-4\">\n      <form @submit.prevent=\"addKategori\">\n        <div class=\"mb-4\">\n          <label class=\"block text-sm font-medium text-gray-600\">Kategori Adı</label>\n          <input v-model=\"kategori.isim\" type=\"text\" class=\"border p-2 w-80 rounded-md\" required />\n        </div>\n        <button type=\"submit\" class=\"bg-green-600 text-white py-2 px-4 rounded-md\">Kategori Ekle</button>\n      </form>\n    </div>\n\n    <!-- Yeni Eğitim Konusu Ekleme -->\n    <div class=\"mb-4\">\n      <form @submit.prevent=\"addEgitimKonu\">\n        <div class=\"mb-4\">\n          <label class=\"block text-sm font-medium text-gray-600\">Kategori</label>\n          <select v-model=\"egitimKonu.kategoriId\" class=\"border p-2 w-80 rounded-md\" required>\n            <option v-for=\"kategori in kategoriler\" :key=\"kategori.id\" :value=\"kategori.id\">\n              {{ kategori.isim }}\n            </option>\n          </select>\n        </div>\n        <div class=\"mb-4\">\n          <label class=\"block text-sm font-medium text-gray-600\">Başlık</label>\n          <input v-model=\"egitimKonu.baslik\" type=\"text\" class=\"border p-2 w-full rounded-md\" required />\n        </div>\n        <div class=\"mb-4\">\n          <label class=\"block text-sm font-medium text-gray-600\">Açıklama</label>\n          <input v-model=\"egitimKonu.aciklama\" type=\"text\" class=\"border p-2 w-full rounded-md\" />\n        </div>\n        <button type=\"submit\" class=\"bg-blue-600 text-white py-2 px-4 rounded-md\">Eğitim Konusu Ekle</button>\n      </form>\n    </div>\n\n    <!-- Kategoriler ve Eğitim Konuları -->\n    <div class=\"mt-6\">\n      <h2 class=\"text-xl font-semibold mb-4\">Kategoriler ve Eğitim Konuları</h2>\n      <div v-for=\"kategori in kategoriler\" :key=\"kategori.id\" class=\"mb-6\">\n        <h3 class=\"text-lg font-bold text-gray-700 mb-2\">{{ kategori.isim }}</h3>\n        <table class=\"min-w-full bg-white rounded-lg shadow-lg\">\n          <thead>\n            <tr>\n              <th class=\"py-2 px-4 bg-gray-200 text-gray-600 font-semibold text-sm uppercase\">Başlık</th>\n              <th class=\"py-2 px-4 bg-gray-200 text-gray-600 font-semibold text-sm uppercase\">Açıklama</th>\n              <th class=\"py-2 px-4 bg-gray-200 text-gray-600 font-semibold text-sm uppercase\">İşlemler</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              v-for=\"konu in kategori.egitimKonular\"\n              :key=\"konu.id\"\n              class=\"text-center bg-white border-b hover:bg-gray-100\"\n            >\n              <td class=\"py-2 px-4 text-gray-700\">{{ konu.baslik }}</td>\n              <td class=\"py-2 px-4 text-gray-700\">{{ konu.aciklama }}</td>\n              <td class=\"py-2 px-4 text-center\">\n                <!-- Düzenle ve Sil Butonları -->\n                <button @click=\"editEgitimKonu(konu)\" class=\"bg-yellow-500 text-white px-2 py-1 rounded-lg mr-2\">Düzenle</button>\n                <button @click=\"deleteEgitimKonu(konu.id)\" class=\"bg-red-500 text-white px-2 py-1 rounded-lg\">Sil</button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</template>\n\n---\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport { useFetch } from \"#app\";\n\nconst kategoriler = ref([]);\nconst egitimKonulari = ref([]);\nconst kategori = ref({ isim: \"\" });\nconst egitimKonu = ref({ baslik: \"\", aciklama: \"\", kategoriId: null });\n\n// Kategorileri ve Eğitim Konularını Getir\nconst fetchKategoriler = async () => {\n  const { data } = await useFetch(\"/api/kategori/get\");\n  kategoriler.value = data.value || [];\n};\n\n// Yeni Kategori Ekle\nconst addKategori = async () => {\n  await useFetch(\"/api/kategori/post\", {\n    method: \"POST\",\n    body: kategori.value,\n  });\n  kategori.value = { isim: \"\" };\n  fetchKategoriler();\n};\n\n// Yeni Eğitim Konusu Ekle\nconst addEgitimKonu = async () => {\n  await useFetch(\"/api/egitimkonu/post\", {\n    method: \"POST\",\n    body: egitimKonu.value,\n  });\n  egitimKonu.value = { baslik: \"\", aciklama: \"\", kategoriId: null };\n  fetchKategoriler();\n};\n\n// Eğitim Konusunu Düzenle\nconst editEgitimKonu = (konu) => {\n  egitimKonu.value = { ...konu };\n};\n\n// Eğitim Konusunu Sil\nconst deleteEgitimKonu = async (id) => {\n  try {\n    // Dinamik rota üzerinden DELETE isteği yap\n    const { data, error } = await useFetch(`/api/egitimkonu/${id}`, { \n      method: \"DELETE\" \n    });\n\n    if (error) {\n      console.error(\"Eğitim konusu silinirken bir hata oluştu:\", error);\n      alert(\"Eğitim konusu silinemedi. Lütfen tekrar deneyin.\");\n      fetchKategoriler();\n    } else {\n      alert(\"Eğitim konusu başarıyla silindi.\");\n      // Kategorileri güncelle\n      fetchKategoriler();\n    }\n  } catch (err) {\n    console.error(\"Beklenmeyen bir hata oluştu:\", err);\n    alert(\"Eğitim konusu silinirken bir hata oluştu.\");\n    fetchKategoriler();\n  }\n};\n\nonMounted(() => {\n  fetchKategoriler();\n});\n</script>\n"],"names":[],"mappings":";;;;;;;;;;;AA8EA,UAAM,cAAc,IAAI,CAAA,CAAE;AACH,QAAI,EAAE;AAC7B,UAAM,WAAW,IAAI,EAAE,MAAM,GAAI,CAAA;AACjC,UAAM,aAAa,IAAI,EAAE,QAAQ,IAAI,UAAU,IAAI,YAAY,KAAI,CAAE;;;;;;;;;;;;;;;;;;;;;;;;"}