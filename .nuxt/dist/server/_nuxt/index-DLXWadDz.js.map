{"version":3,"file":"index-DLXWadDz.js","sources":["../../../../pages/firma/index.vue"],"sourcesContent":["<template>\n  <div class=\"p-4 max-w-full mx-auto bg-white rounded-lg shadow-lg\">\n    \n    <h1 class=\"text-3xl font-semibold mb-6 text-gray-800\">Firmalar</h1>\n    \n    <!-- Arama Alanları -->\n    <div class=\"flex flex-wrap items-center mb-4\">\n      <input \n        v-model=\"searchQuery.name\"\n        type=\"text\" \n        placeholder=\"Firma Adında Ara\" \n        class=\"w-full md:w-1/6 p-2 border rounded-lg mr-2 mb-2\"\n      />\n      <!-- <input \n        v-model=\"searchQuery.yetkili\"\n        type=\"text\" \n        placeholder=\"Yetkili Adında Ara\" \n        class=\"w-full md:w-1/3 p-2 border rounded-lg mb-2\"\n      /> -->\n      <button @click=\"toggleModal\" class=\"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg shadow-md ml-auto mb-2 transition duration-300\">\n        Yeni Firma Ekle\n      </button>\n    </div>\n\n    \n   \n      <!-- <table class=\"w-full border-collapse bg-white text-left shadow-md rounded-md\">\n        <thead>\n          <tr class=\"bg-gray-200 text-gray-700\">\n            <th class=\"p-3 text-left\">Firma Kodu</th>\n            <th class=\"p-3 text-left\">Firma Adı</th>\n            <th class=\"p-3 text-left\">Adres</th>\n            <th class=\"p-3 text-left\">İl</th>\n            <th class=\"p-3 text-left\">İlçe</th>\n            <th class=\"p-3 text-left\">Telefon</th>\n            <th class=\"p-3 text-left\">Email</th>\n            <th class=\"p-3 text-left\">Yetkili</th>\n            <th class=\"p-3 text-left\">NACE Kodu</th>\n            <th class=\"p-3 text-left\">Teklike Sınıfı</th>\n            <th class=\"p-3 text-left\">SGK Sicil No</th>\n            <th class=\"p-3 text-center\">İşlemler</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"firma in filteredFirmalar\" :key=\"firma.id\" class=\"border-b hover:bg-gray-100\">\n            <td class=\"p-3\">{{ firma.firmaKodu }}</td>\n            <td class=\"p-3\">{{ firma.firmaAdi }}</td>\n            <td class=\"p-3\">{{ firma.adres }}</td>\n            <td class=\"p-3\">{{ firma.il }}</td>\n            <td class=\"p-3\">{{ firma.ilce }}</td>\n            <td class=\"p-3\">{{ firma.telefon }}</td>\n            <td class=\"p-3\">{{ firma.email }}</td>\n            <td class=\"p-3\">{{ firma.yetkili }}</td>\n            <td class=\"p-3\">{{ firma.nace.kod }}</td>\n            <td class=\"p-3\">{{ firma.nace.tehlikeSinifi }}</td>\n            <td class=\"p-3\">{{ firma.isgkSicilNo }}</td>\n            <td class=\"p-3 text-center flex justify-center space-x-2\">\n  \n  <button @click=\"editFirma(firma)\" class=\"bg-yellow-500 hover:bg-yellow-600 text-white px-2 py-2 rounded-lg inline-flex items-center\">\n    <Icon name=\"mdi-pencil\" class=\"w-5 h-5\" />\n  </button>\n\n  \n  <button @click=\"deleteFirma(firma.id)\" class=\"bg-red-500 hover:bg-red-600 text-white px-2 py-2 rounded-lg inline-flex items-center\">\n    <Icon name=\"mdi-trash-can\" class=\"w-5 h-5\" />\n  </button>\n\n\n  \n   <div class=\"relative\">\n <button @click=\"toggleMenu(firma.id)\" class=\"bg-gray-500 hover:bg-gray-600 text-white px-2 py-2 rounded-lg inline-flex items-center\">\n        <Icon name=\"mdi-dots-vertical\" class=\"w-5 h-5\" />\n      </button> \n     \n      <div v-if=\"activeDropdown === firma.id\" class=\"absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded-lg shadow-lg z-50\">\n        <ul class=\"py-1\">\n          <li>\n            <button @click=\"addYerleske(firma.id)\" class=\"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center\">\n             <Icon name=\"mdi-plus\" class=\"w-5 h-5 mr-2 text-gray-500 align-middle leading-none\" />\n            <span class=\"align-middle leading-none\">Taşeron Ekle</span>\n            </button>\n            <button @click=\"addEgtPlan(firma.id)\" class=\"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center\">\n             <Icon name=\"mdi-calendar\" class=\"w-5 h-5 mr-2 text-gray-500 align-middle leading-none\" />\n            <span class=\"align-middle leading-none\">Eğitim Planı</span>\n            </button>\n          </li>\n          \n         \n        </ul>\n      </div>\n   </div>\n     \n\n     \n    </td>\n\n\n\n          </tr>\n        </tbody>\n      </table> -->\n    <transition name=\"fade\">\n      <div v-if=\"showModal\" class=\"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50\">\n        <div class=\"bg-white rounded-lg shadow-lg p-6 w-full max-w-lg\">\n          <h2 class=\"text-2xl font-medium text-gray-700 mb-4\">{{ firma.id ? \"Firmayı Düzenle\" : \"Yeni Firma Ekle\" }}</h2>\n         \n          \n          \n          <form @submit.prevent=\"handleSubmit\">\n            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n             <label class=\"block text-gray-600 mb-1\">Firma Kodu</label> \n            <input :value=\"firma.firmaKodu\" type=\"text\" class=\"w-24 p-3 border rounded-lg\" placeholder=\"Firma kodu yükleniyor...\" required />\n            <button @click=\"firmakod\" type=\"button\" class=\"px-4 py-2 mx-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg shadow-md\">KodAl</button>\n           </div>\n              <div>\n                <label class=\"block text-gray-600 mb-1\">Firma Adı</label>\n                <input v-model=\"firma.firmaAdi\" type=\"text\" class=\"w-full p-3 border rounded-lg\" required />\n              </div>\n              <div class=\"col-span-1 md:col-span-2\">\n                <label class=\"block text-gray-600 mb-1\">Adres</label>\n                <input v-model=\"firma.adres\" type=\"text\" class=\"w-full p-3 border rounded-lg\" required />\n              </div>\n              <div>\n      <label class=\"block text-gray-600 mb-1\">İl</label>\n      <select v-model=\"firma.il\" class=\"w-full p-3 border rounded-lg\" required>\n        <option value=\"Antalya\">Antalya</option>\n      </select>\n    </div>\n    <div >\n      <label class=\"block text-gray-600 mb-1\">İlçe</label>\n      <select v-model=\"firma.ilce\" class=\"w-full p-3 border rounded-lg\" required>\n        <option disabled value=\"\">Lütfen bir ilçe seçiniz</option>\n        <option v-for=\"ilce in ilceler\" :key=\"ilce\" :value=\"ilce\">\n          {{ ilce }}\n        </option>\n      </select>\n    </div>\n    <div>\n                <label class=\"block text-gray-600 mb-1\">SGK Sicil No</label>\n                <input v-model=\"firma.isgkSicilNo\" type=\"text\" class=\"w-full p-3 border rounded-lg\" required  @input=\"fetchNaceCodes\" />\n              </div>\n              <div v-if=\"naceList.length > 0\" class=\"mt-4\">\n  <label class=\"block text-gray-600 mb-1\">NACE Kodları</label>\n  <div v-for=\"nace in naceList\" :key=\"nace.id\" class=\"flex items-center\">\n    <input\n      type=\"radio\"\n      :value=\"nace.id\"\n      v-model=\"firma.naceId\"\n      @change=\"updateTehlikeSinifi(nace)\"\n      class=\"mr-2\"\n    />\n    <span>{{ nace.kod }} -  ({{ nace.tehlikeSinifi }})</span>\n  </div>\n</div>\n              <div>\n                <label class=\"block text-gray-600 mb-1\">NACE Kodu ID</label>\n                <input v-model=\"firma.naceId\" type=\"text\" class=\"w-full p-3 border rounded-lg\" required />\n              </div>\n              <div>\n                <label class=\"block text-gray-600 mb-1\">Tehlike Sınıfı</label>\n                <input v-model=\"firma.tehlikeSinifi\" type=\"text\" class=\"w-full p-3 border rounded-lg\"/>\n              </div>\n              <div>\n                <label class=\"block text-gray-600 mb-1\">Telefon</label>\n                <input v-model=\"firma.telefon\" type=\"text\" class=\"w-full p-3 border rounded-lg\" />\n              </div>\n              <div>\n                <label class=\"block text-gray-600 mb-1\">Email</label>\n                <input v-model=\"firma.email\" type=\"text\" class=\"w-full p-3 border rounded-lg\"  />\n              </div>\n              <div>\n                <label class=\"block text-gray-600 mb-1\">Yetkili</label>\n                <input v-model=\"firma.yetkili\" type=\"text\" class=\"w-full p-3 border rounded-lg\" required />\n              </div>\n              \n             \n            </div>\n            \n            <div class=\"mt-6 flex justify-end\">\n              <button @click=\"toggleModal\" type=\"button\" class=\"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg shadow-md mr-2\">İptal</button>\n              <button type=\"submit\" class=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg shadow-md\">Kaydet</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </transition>\n \n  \n \n\n  <!--burası 2 inci test tablosu-->\n  <div class=\"p-4 max-w-full mx-auto bg-white rounded-lg shadow-lg\">\n    <h1 class=\"text-3xl font-semibold mb-6 text-gray-800\">Firmalar</h1>\n\n    <!-- Firma Tablosu -->\n    <table class=\"w-full border-collapse bg-white text-left shadow-md rounded-md\">\n      <thead>\n        <tr class=\"bg-gray-200 text-gray-700\">\n          <th class=\"p-3 text-left\">Firma Kodu</th>\n            <th class=\"p-3 text-left\">Firma Adı</th>\n            <th class=\"p-3 text-left\">Adres</th>\n            <th class=\"p-3 text-left\">İl</th>\n            <th class=\"p-3 text-left\">İlçe</th>\n            <th class=\"p-3 text-left\">Telefon</th>\n            <th class=\"p-3 text-left\">Email</th>\n            <th class=\"p-3 text-left\">Yetkili</th>\n            <th class=\"p-3 text-left\">NACE Kodu</th>\n            <th class=\"p-3 text-left\">Teklike Sınıfı</th>\n            <th class=\"p-3 text-left\">SGK Sicil No</th>\n            <th class=\"p-3 text-center\">İşlemler</th>\n        </tr>\n      </thead>\n      <tbody>\n        <!-- Firma ve Şubeler -->\n        <template v-for=\"firma in filteredFirmalar\" :key=\"firma.id\">\n          <!-- Firma Bilgileri -->\n          <tr class=\"border-b hover:bg-gray-50\">\n            <td class=\"p-3\">\n              <button \n                @click=\"toggleSubeler(firma.id)\"\n                class=\"text-blue-500 hover:text-blue-700\"\n              >\n                {{ expandedFirma === firma.id ? '<' : '>' }}\n              </button>\n              {{ firma.firmaKodu }}\n            </td>\n            <td class=\"p-3\">{{ firma.firmaAdi }}</td>\n            <td class=\"p-3\">{{ firma.adres }}</td>\n            <td class=\"p-3\">{{ firma.il }}</td>\n            <td class=\"p-3\">{{ firma.ilce }}</td>\n            <td class=\"p-3\">{{ firma.telefon }}</td>\n            <td class=\"p-3\">{{ firma.email }}</td>\n            <td class=\"p-3\">{{ firma.yetkili }}</td>\n            <td class=\"p-3\">{{ firma.nace.kod }}</td>\n            <td class=\"p-3\">{{ firma.nace.tehlikeSinifi }}</td>\n            <td class=\"p-3\">{{ firma.isgkSicilNo }}</td>\n            <td class=\"p-3 text-center flex justify-center space-x-2\">\n  <!-- Düzenle Düğmesi -->\n  <button @click=\"editFirma(firma)\" class=\"bg-yellow-500 hover:bg-yellow-600 text-white px-2 py-2 rounded-lg inline-flex items-center\">\n    <Icon name=\"mdi-pencil\" class=\"w-5 h-5\" />\n  </button>\n\n  <!-- Sil Düğmesi -->\n  <button @click=\"deleteFirma(firma.id)\" class=\"bg-red-500 hover:bg-red-600 text-white px-2 py-2 rounded-lg inline-flex items-center\">\n    <Icon name=\"mdi-trash-can\" class=\"w-5 h-5\" />\n  </button>\n\n\n    <!-- Dropdown Menüsü -->\n   <div class=\"relative\">\n <button @click=\"toggleMenu(firma.id)\" class=\"bg-gray-500 hover:bg-gray-600 text-white px-2 py-2 rounded-lg inline-flex items-center\">\n        <Icon name=\"mdi-dots-vertical\" class=\"w-5 h-5\" />\n      </button> \n      <!-- Sadece activeDropdown ile eşleşen id için menü açılır -->\n      <div v-if=\"activeDropdown === firma.id\" class=\"absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded-lg shadow-lg z-50\">\n        <ul class=\"py-1\">\n          <li>\n            <button @click=\"addYerleske(firma.id)\" class=\"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center\">\n             <Icon name=\"mdi-plus\" class=\"w-5 h-5 mr-2 text-gray-500 align-middle leading-none\" />\n            <span class=\"align-middle leading-none\">Taşeron Ekle</span>\n            </button>\n            <button @click=\"addEgtPlan(firma.id)\" class=\"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center\">\n             <Icon name=\"mdi-calendar\" class=\"w-5 h-5 mr-2 text-gray-500 align-middle leading-none\" />\n            <span class=\"align-middle leading-none\">Eğitim Planı</span>\n            </button>\n            <button @click=\"addFirmaCalisan(firma.id)\" class=\"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center\">\n             <Icon name=\"mdi-plus\" class=\"w-5 h-5 mr-2 text-gray-500 align-middle leading-none\" />\n            <span class=\"align-middle leading-none\">Çalışan Ekle</span>\n            </button>\n          </li>\n          \n          <!-- Diğer menü seçenekleri -->\n        </ul>\n      </div>\n   </div>\n     \n\n     \n    </td>\n          </tr>\n              <!-- Şube Başlıkları -->\n              <tr v-if=\"expandedFirma === firma.id\" class=\"bg-gray-300\">\n          <th class=\"p-3 border-b\">Taşeron Adı</th>\n          <th class=\"p-3 border-b\">Adres</th>\n          <th class=\"p-3 border-b\">NACE Kodu</th>\n          <th class=\"p-3 border-b\">Tehlike Sınıfı</th>\n          <th class=\"p-3 border-b\">Telefon</th>\n          <th class=\"p-3 border-b\">Yetkili</th>\n          <th class=\"p-3 border-b\">SGK Sicil No</th>\n          <th class=\"p-3 border-b text-center\">İşlemler</th>\n          </tr>\n\n          <!-- Şube Bilgileri -->\n          <tr v-if=\"expandedFirma === firma.id\" v-for=\"sube in firmaSubeleri[firma.id]\" :key=\"sube.id\" class=\"bg-gray-100\">\n          <td class=\"p-3\">{{ sube.subeAdi }}</td>\n          <td class=\"p-3\">{{ sube.adres }}</td>\n          <td class=\"p-3\">{{ sube.nace.kod }} </td>\n          <td class=\"p-3\">{{ sube.nace.tehlikeSinifi }} </td>\n          <td class=\"p-3\">{{ sube.telefon }}</td>\n          <td class=\"p-3\">{{ sube.yetkili }}</td>\n          <td class=\"p-3\">{{ sube.sgkSicilNo }}</td>\n          <td class=\"p-3 text-center flex justify-center space-x-2\">\n  <!-- Düzenle Düğmesi -->\n \n\n\n    <!-- Dropdown Menüsü -->\n   <div class=\"relative\">\n<button @click=\"toggleDropdown2(sube.id)\" class=\"bg-gray-500 hover:bg-gray-600 text-white px-2 py-2 rounded-lg inline-flex items-center\">\n        <Icon name=\"mdi-dots-vertical\" class=\"w-5 h-5\" />\n      </button>\n       <!-- Sadece activeDropdown ile eşleşen id için menü açılır -->\n      <div v-if=\"activeDropdown2 === sube.id\" class=\"absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded-lg shadow-lg z-50\">\n        <ul class=\"py-1\">\n          <li>\n            <button @click=\"addCalisan(sube.firma.id, sube.id)\" class=\"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center\">\n             <Icon name=\"mdi-plus\" class=\"w-5 h-5 mr-2 text-gray-500 align-middle leading-none\" />\n            <span class=\"align-middle leading-none\">Çalışan Ekle</span>\n            </button>\n          </li>\n          <!-- Diğer menü seçenekleri -->\n        </ul>\n      </div>\n   </div>\n      \n\n     \n    </td>\n        \n  \n          </tr>\n        </template>\n      </tbody>\n    </table>\n  </div>\n  </div>\n\n\n</template>\n\n\n<script setup>\nimport { ref, computed, onMounted, reactive } from 'vue'\nimport { useRouter } from 'vue-router'\n\nconst isOpen = ref(false)\nconst menuX = ref(0)\nconst menuY = ref(0)\nconst router = useRouter()\nconst activeDropdown = ref(null)\nconst activeDropdown2 = ref(null)\nconst naceList = ref([]);\nconst selectedNace = ref(null);\n\nconst subeler = ref([]);\nconst expandedFirma = ref(null);\nconst firmaSubeleri = ref({});\n\n\n\n\nconst selectFirma = ref(null);\nconst firmalar = ref([])\nconst searchQuery = ref({ name: '', yetkili: '' })\n\nconst ilceler = [\n  \"Akseki\",\n  \"Aksu\",\n  \"Alanya\",\n  \"Demre\",\n  \"Döşemealtı\",\n  \"Elmalı\",\n  \"Finike\",\n  \"Gazipaşa\",\n  \"Gündoğmuş\",\n  \"İbradı\",\n  \"Kaş\",\n  \"Kemer\",\n  \"Kepez\",\n  \"Konyaaltı\",\n  \"Korkuteli\",\n  \"Kumluca\",\n  \"Manavgat\",\n  \"Muratpaşa\",\n  \"Serik\",\n];\n\nconst toggleDropdown2 = (id) => {\n  activeDropdown2.value = activeDropdown2.value === id ? null : id\n // activeDropdown.value = activeDropdown.value === id ? null : id\n}\nconst addCalisan = (firmaId, yerleskeId) => {\n  router.push({ path: '/calisanlar/ekle', query: { firmaId, yerleskeId } })\n \n}\n\nconst addFirmaCalisan=(firmaId)=>{\n  router.push({path:'/calisanlar/ekle',query:{firmaId}})\n}\n\n\n// Şube açma/kapama\nconst toggleSubeler = async (firmaId) => {\n  if (expandedFirma.value === firmaId) {\n    expandedFirma.value = null;\n    subeler.value = [];\n  } else {\n    expandedFirma.value = firmaId;\n    if (!firmaSubeleri.value[firmaId]) {\n      await fetchSubeler(firmaId);\n    }\n  }\n};\nconst fetchSubeler = async (firmaId) => {\n  console.log('Menu Gelen FirmaID:',firmaId)\n  try {\n    const { data } = await useFetch(`/api/yerleske/getByFirmaId?firmaId=${firmaId}`);\n                    \n    firmaSubeleri.value[firmaId] = data.value || [];\n  } catch (error) {\n    console.error('Şubeler yüklenirken hata oluştu:', error);\n  }\n};\nconst toggleMenu = (firmaId) => {\n  // Menüyü aç/kapat - Aynı id'ye tıklandıysa kapat, farklıysa aç\n  activeDropdown.value = activeDropdown.value === firmaId ? null : firmaId\n}\n\nconst addYerleske = (firmaId) => {\n  // Menüyü kapat ve yerleşke ekleme işlemini başlat\n  isOpen.value = false\n  router.push(`/yerleske/ekle?firmaId=${firmaId}`)\n}\n\nconst addEgtPlan = (firmaId) => {\n  // Menüyü kapat ve yerleşke ekleme işlemini başlat\n  isOpen.value = false\n  router.push(`/firma/takvim?firmaId=${firmaId}`)\n}\n\nconst test=ref();\nconst firma = ref({\n  firmaKodu: '',\n  firmaAdi: '',\n  adres: '',\n  il: '',\n  ilce: '',\n  telefon: '',\n  email: '',\n  yetkili: '',\n  naceId: 0,\n  isgkSicilNo: '',\n  tehlikeSinifi:''\n})\nconst showModal = ref(false)\n\nconst fetchFirmalar = async () => {\n  const { data } = await useFetch('/api/firma/get')\n  firmalar.value = data.value;\n  \n}\n\nconst firmakod = async()=>{\n  try {\n    const { data } = await useFetch('/api/firma/getLatestFirmaKodu'); // Backend'deki API endpoint\n    if (data.value && data.value.success) {\n      test.value = data.value.nextFirmaKodu;\n      firma.value.firmaKodu = String(data.value.nextFirmaKodu);\n      console.log('GELENKOD',data)\n    } else {\n      console.error('Firma kodu alınamadı.');\n    }\n  } catch (error) {\n    console.error('Hata:', error);\n  }\n\n}\n\nonMounted(()=>{\n  fetchFirmalar();\n  firmakod();\n  console.log('Sayfa Yüklendi')\n  console.log('DATA',firmalar)\n\n})\n\nconst filteredFirmalar = computed(() => {\n  return firmalar.value.filter(firma =>\n    firma.firmaAdi.toLowerCase().includes(searchQuery.value.name.toLowerCase()) &&\n    firma.yetkili.toLowerCase().includes(searchQuery.value.yetkili.toLowerCase())\n  )\n})\n\nconst toggleModal = () => {\n  showModal.value = !showModal.value\n  resetForm()\n}\n\nconst resetForm = () => {\n  firma.value = {\n    firmaKodu: '',\n    firmaAdi: '',\n    adres: '',\n    il: '',\n    ilce: '',\n    telefon: '',\n    email: '',\n    yetkili: '',\n    naceId: '',\n    isgkSicilNo: '',\n    tehlikeSinifi:''\n    \n  }\n}\n\n\nconst handleSubmit = async () => {\n  \n  if (selectFirma.value) {\n    await useFetch(`/api/firma/${selectFirma.value.id}`,{\n      method: 'PUT',\n      body :{\n      firmaKodu: firma.value.firmaKodu,\n      firmaAdi: firma.value.firmaAdi,\n      adres: firma.value.adres,\n      il: firma.value.il,\n      ilce: firma.value.ilce,\n      telefon: firma.value.telefon,\n      email: firma.value.email,\n      yetkili: firma.value.yetkili,\n      naceId: firma.value.naceId,\n      isgkSicilNo: firma.value.isgkSicilNo,\n      tehlikeSinifi:firma.value.tehlikeSinifi\n\n      }\n    });\n    fetchFirmalar()\n    selectFirma.value = null;\n    showModal.value=false\n\n\n    \n  }\n  else  {\n    await $fetch('/api/firma/post', {\n    method: 'POST',\n    body: {\n      firmaKodu: firma.value.firmaKodu,\n      firmaAdi: firma.value.firmaAdi,\n      adres: firma.value.adres,\n      il: firma.value.il,\n      ilce: firma.value.ilce,\n      telefon: firma.value.telefon,\n      email: firma.value.email,\n      yetkili: firma.value.yetkili,\n      naceId: firma.value.naceId,\n      isgkSicilNo: firma.value.isgkSicilNo,\n    },\n  })\n  alert('Firma başarıyla eklendi!')\n  showModal.value = false\n  fetchFirmalar()\n  }\n  \n}\n\n\nconst editFirma = (selectedFirma) => {\n  selectFirma.value={...selectedFirma}\n  firma.value = { ...selectedFirma }\n  showModal.value = true\n}\n\nconst deleteFirma = async (id) => {\n  await $fetch(`/api/firma/delete`, {\n    method: 'DELETE',\n    body:{\n      id:id\n    }\n  })\n  fetchFirmalar()\n}\n\nconst delay = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\n\nconst fetchNaceCodes = async () => {\n  if (firma.value.isgkSicilNo.length >= 4) {\n    await delay(3000)\n    const { data } = await useFetch('/api/firma/nace-search', {\n      method: 'POST',\n      body: { sgkSicilNo: firma.value.isgkSicilNo },\n    });\n    naceList.value = data.value || [];\n  } else {\n    naceList.value = [];\n  }\n};\nconst updateTehlikeSinifi = (nace) => {\n  firma.value.tehlikeSinifi = nace.tehlikeSinifi; // Tehlike sınıfını atar\n};\n\n\n\n</script>\n\n<style>\n.fade-enter-active, .fade-leave-active {\n  transition: opacity 0.3s;\n}\n.fade-enter-from, .fade-leave-to {\n  opacity: 0;\n}\n\n</style>\n"],"names":["firma"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AA0Ve,QAAI,KAAK;AACV,QAAI,CAAC;AACL,QAAI,CAAC;AACJ,cAAU;AACzB,UAAM,iBAAiB,IAAI,IAAI;AAC/B,UAAM,kBAAkB,IAAI,IAAI;AAChC,UAAM,WAAW,IAAI,CAAA,CAAE;AACF,QAAI,IAAI;AAEb,QAAI,EAAE;AACtB,UAAM,gBAAgB,IAAI,IAAI;AAC9B,UAAM,gBAAgB,IAAI,CAAA,CAAE;AAKR,QAAI,IAAI;AAC5B,UAAM,WAAW,IAAI,EAAE;AACvB,UAAM,cAAc,IAAI,EAAE,MAAM,IAAI,SAAS,IAAI;AAEjD,UAAM,UAAU;AAAA,MACd;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAuDW,QAAK;AAChB,UAAM,QAAQ,IAAI;AAAA,MAChB,WAAW;AAAA,MACX,UAAU;AAAA,MACV,OAAO;AAAA,MACP,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,MACT,OAAO;AAAA,MACP,SAAS;AAAA,MACT,QAAQ;AAAA,MACR,aAAa;AAAA,MACb,eAAc;AAAA,IAChB,CAAC;AACD,UAAM,YAAY,IAAI,KAAK;AAgC3B,UAAM,mBAAmB,SAAS,MAAM;AACtC,aAAO,SAAS,MAAM;AAAA,QAAO,CAAAA,WAC3BA,OAAM,SAAS,cAAc,SAAS,YAAY,MAAM,KAAK,aAAa,KAC1EA,OAAM,QAAQ,cAAc,SAAS,YAAY,MAAM,QAAQ,aAAa;AAAA,MAC9E;AAAA,IACF,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}